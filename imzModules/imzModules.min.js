function smoothScroll(e){var t=window.pageYOffset,o=e>t;setTimeout(function(){o&&e>=t?(t=t+(e-t)/20+1,window.scrollTo(0,t),setTimeout(arguments.callee,10)):!o&&t>=e?(t=t-(t-e)/20-1,window.scrollTo(0,t),setTimeout(arguments.callee,10)):window.scrollTo(0,e)},10)}function scrollToContent(e){var t=document.getElementById(e.replace(/^#/,""));if(null!=t){var o=t.getBoundingClientRect().top+window.pageYOffset;smoothScroll(o),document.body.classList.contains("offcanvas")&&toggleoffcanvas()}}function toggleoffcanvas(){if(document.body.classList.contains("offcanvas"))document.body.classList.remove("offcanvas");else{document.body.classList.add("offcanvas");var e=document.getElementsByClassName("imzMenu")[0];e.addEventListener("touchmove",function(t){var o=e.scrollTop,n=e.scrollHeight-e.offsetHeight-1;1>o?(t.preventDefault(),e.scrollTop=1):o>n&&(t.preventDefault(),e.scrollTop=n)})}}var imzModules=function(){var e=function(){this.mvBgImg=arguments[0].mvBgImg||!1,this.chgFeturedImg=arguments[0].chgFeturedImg||!1,this.scrNavi=arguments[0].scrNavi||!1,this.mvCategory=arguments[0].mvCategory||!1};return e.prototype.init=function(){var e=document.body.classList;if(this.mvBgImg&&e.contains("header-image-enable")){var t=document.getElementById("blog-title-inner");document.getElementById("blog-title").style.backgroundImage=t.style.backgroundImage,t.removeAttribute("style")}if(this.chgFeturedImg&&e.contains("page-index")&&e.contains("page-archive")){var o=document.getElementsByClassName("entry-thumb"),n=/https%3A%2F%2F.+\.(jpg|jpeg|gif|png|bmp)/i;Array.prototype.forEach.call(o,function(e){var t=n.exec(e.getAttribute("style"));null!==t&&(e.style.backgroundImage="url("+decodeURIComponent(t[0])+")")})}if(this.mvCategory){var a=document.getElementsByClassName("hatena-module-category")[0],l=document.getElementById("top-editarea-inner");if(void 0!==a&&null!==l){var i=a.getElementsByClassName("hatena-urllist")[0];i.classList.remove("hatena-urllist"),i.classList.add("imzMenu"),Array.prototype.forEach.call(i.getElementsByTagName("a"),function(e){e.textContent=e.textContent.replace(/\s\(([0-9]{1,})\)/,"")}),l.appendChild(i),a.style.display="none"}}if(this.scrNavi){for(var s=['<li><a href="javascript:void(0);" onclick="smoothScroll(0);"><i class="blogicon-chevron-up"></i></a></li>','<li><a href="javascript:void(0);" onclick="scrollToContent(\'imz-smoothscroll\');"><i class="blogicon-chevron-down"></i></a></li>','<li><a href="/"><i class="blogicon-home"></i></a></li>'],c=document.createElement("ul"),r=0;r<s.length;r++)c.insertAdjacentHTML("beforeend",s[r]);c.classList.add("imzScroll"),document.getElementById("bottom-editarea-inner").appendChild(c);var m=document.createElement("div");m.id="imz-smoothscroll",document.getElementById("wrapper").appendChild(m)}var d=document.getElementsByClassName("imzMenu")[0];if(void 0!==d){var g=document.createElement("a");g.setAttribute("href","javascript:void(0);"),g.setAttribute("onclick","toggleoffcanvas();return false;"),g.classList.add("offcanvastoggle"),d.parentNode.insertBefore(g,d)}},e}();