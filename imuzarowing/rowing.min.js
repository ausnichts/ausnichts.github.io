function smoothScroll(e){var t=window.pageYOffset,n=e>t;setTimeout(function(){n&&e>=t?(t=t+(e-t)/20+1,window.scrollTo(0,t),setTimeout(arguments.callee,10)):!n&&t>=e?(t=t-(t-e)/20-1,window.scrollTo(0,t),setTimeout(arguments.callee,10)):window.scrollTo(0,e)},10)}function scrollToContent(e){var t=document.getElementById(e.replace(/^#/,""));if(null!=t){var n=t.getBoundingClientRect().top+window.pageYOffset;smoothScroll(n),document.body.classList.contains("offcanvas")&&toggleoffcanvas()}}function toggleoffcanvas(){if(document.body.classList.contains("offcanvas"))document.body.classList.remove("offcanvas");else{document.body.classList.add("offcanvas");var e=document.getElementsByClassName("offcanvasmenu")[0];e.addEventListener("touchmove",function(t){var n=e.scrollTop,a=e.scrollHeight-e.offsetHeight-1;1>n?(t.preventDefault(),e.scrollTop=1):n>a&&(t.preventDefault(),e.scrollTop=a)})}}var imzModules=function(){var e=function(){this.f0=arguments[0].linkBlank||!1,this.f1=arguments[0].mvBgImg||!1,this.f2=arguments[0].chgFeturedImg||!1,this.f3=arguments[0].scrNavi||!1,this.f4=arguments[0].mvCategory||!1,this.f5=arguments[0].imzNavbar||!1,this.addHistoryBack=arguments[0].addHistoryBack||!1,this.f6=arguments[0].forRowing||!1};return e.prototype.init=function(){var e=document.body.classList,t=function(e){var t=new Date(e.getAttribute("datetime")),n={weekday:"long",year:"numeric",month:"short",day:"numeric"};return e.innerHTML=t.toLocaleDateString("en-us",n)+".",e};if(this.f0){var n=new RegExp("^http(s)?://(?!"+location.hostname+")");Array.prototype.forEach.call(document.getElementsByTagName("a"),function(e){n.test(e.href)&&e.setAttribute("target","_blank")})}if(this.f1&&e.contains("header-image-enable")){var a=document.getElementById("blog-title-inner"),o=a.getAttribute("style").replace(/background-position.*?;/,"");a.removeAttribute("style"),document.getElementById("blog-title").setAttribute("style",o)}if(this.f2&&e.contains("page-index")&&e.contains("page-archive")&&this.f6){var i=document.getElementsByClassName("entry-thumb"),l=/https%3A%2F%2F.+\.(jpg|jpeg|gif|png|bmp)/i;Array.prototype.forEach.call(i,function(e){var t=l.exec(e.getAttribute("style"));null!==t&&(e.style.backgroundImage="url("+decodeURIComponent(t[0])+")")})}if(this.f3){for(var s=document.getElementById("wrapper"),r=['<li><a href="javascript:void(0);" onclick="smoothScroll(0);"><i class="blogicon-chevron-up"></i></a></li>','<li><a href="javascript:void(0);" onclick="scrollToContent(\'imz-smoothscroll\');"><i class="blogicon-chevron-down"></i></a></li>','<li><a href="/"><i class="blogicon-home"></i></a></li>'],c=document.createElement("ul"),d=0;d<r.length;d++)c.insertAdjacentHTML("beforeend",r[d]);c.classList.add("imzScroll"),document.getElementById("bottom-editarea-inner").appendChild(c);var m=s.getElementsByClassName("table-of-contents")[0];void 0!==m&&Array.prototype.forEach.call(m.getElementsByTagName("a"),function(e){e.setAttribute("onclick","javascript:scrollToContent('"+e.getAttribute("href")+"')"),e.setAttribute("href","javascript:void(0)")});var u=document.createElement("div");u.id="imz-smoothscroll",s.appendChild(u)}var f=document.getElementsByClassName("hatena-module-category")[0],g=document.getElementById("top-editarea-inner");if(this.f4&&void 0!==f&&null!==g){var p=f.getElementsByClassName("hatena-urllist")[0];p.classList.remove("hatena-urllist"),p.classList.add("imzMenu"),Array.prototype.forEach.call(p.getElementsByTagName("a"),function(e){e.textContent=e.textContent.replace(/\s\(([0-9]{1,})\)/,"")}),g.appendChild(p),f.style.display="none"}if(this.addHistoryBack&&-1!==location.href.indexOf("?page=")){var h=document.getElementsByClassName("pager")[0],y=document.createElement("span");if(-1!==document.referrer.indexOf(document.domain))var v='<a href="#" onClick="history.back(); return false;">前のページ</a>';else var v='<a href="/">ホーム</a>';y.innerHTML=v,y.classList.add("pager-prev"),h.insertBefore(y,h.firstChild)}if(this.f6){var E=document.getElementById("imzNavbar");null!==E&&(E.parentElement.parentElement.style.display="none",document.getElementById("blog-title-inner").appendChild(E));var c=document.createDocumentFragment();if(e.contains("page-index")){var b=document.getElementById("topPageInfo");null!==b&&(b.parentElement.parentElement.style.display="none",document.getElementById("top-info-inner").appendChild(b)),c.appendChild(document.getElementsByClassName("recent-entries-title")[0].cloneNode(!0));var B=document.createElement("button");B.textContent="Go Latest Articles",B.setAttribute("onclick","scrollToContent('main');"),B.classList.add("imz-button"),c.appendChild(B),Array.prototype.forEach.call(document.getElementsByTagName("time"),function(e){t(e)});var C=document.getElementsByClassName("pager-next")[0].getElementsByTagName("a")[0];C.setAttribute("href",C.getAttribute("href")+"#main")}else if(e.contains("page-entry")){var N=document.getElementsByClassName("entry-header")[0];t(N.getElementsByTagName("time")[0]),c.appendChild(N)}else if(e.contains("static-page-inquiry")||e.contains("page-about"))c.appendChild(document.getElementsByClassName("entry-header")[0]);else if(e.contains("page-archive-category"))c.appendChild(document.getElementById("top-box"));else if(e.contains("page-archive")){var T=document.getElementsByClassName("archive-heading")[0];if(void 0===T){var T=document.createElement("h1");T.textContent="記事一覧",T.classList.add("archive-list")}c.appendChild(T),Array.prototype.forEach.call(document.getElementsByTagName("time"),function(e){t(e)})}else e.contains("page-static_page")&&c.appendChild(document.getElementsByClassName("entry-title")[0]);document.getElementById("top-editarea-inner").appendChild(c)}},e}();
